<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  
  <title>Hexo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="XIU2&#x2F;CloudflareSpeedTest 国外很多网站都在使用 Cloudflare CDN，但分配给中国访客的 IP 并不友好（高延迟&#x2F;高丢包&#x2F;速度慢等）。虽然 Cloudflare 公开了所有 IP 段 ，但想要在这么多 IP 中找到适合自己的，怕是要累死，所以就有了这个软件。   该软件可以测试 Cloudflare CDN 延迟和速度，获取最快 IP">
<meta property="og:type" content="article">
<meta property="og:title" content="Hexo">
<meta property="og:url" content="http://example.com/2023/08/11/CF-SpeedTest%20-%20%E6%B5%8B%E8%AF%95%20CF%20CDN%20%E5%BB%B6%E8%BF%9F%E5%92%8C%E9%80%9F%E5%BA%A6%EF%BC%8CCF%E8%87%AA%E9%80%89IP/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:description" content="XIU2&#x2F;CloudflareSpeedTest 国外很多网站都在使用 Cloudflare CDN，但分配给中国访客的 IP 并不友好（高延迟&#x2F;高丢包&#x2F;速度慢等）。虽然 Cloudflare 公开了所有 IP 段 ，但想要在这么多 IP 中找到适合自己的，怕是要累死，所以就有了这个软件。   该软件可以测试 Cloudflare CDN 延迟和速度，获取最快 IP">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://img.shields.io/github/go-mod/go-version/XIU2/CloudflareSpeedTest.svg?style=flat-square&label=Go&color=00ADD8">
<meta property="og:image" content="https://img.shields.io/github/v/release/XIU2/CloudflareSpeedTest.svg?style=flat-square&label=Release&color=1784ff">
<meta property="og:image" content="https://img.shields.io/github/license/XIU2/CloudflareSpeedTest.svg?style=flat-square&label=License&color=f38020">
<meta property="og:image" content="https://img.shields.io/github/stars/XIU2/CloudflareSpeedTest.svg?style=flat-square&label=Star&color=f38020">
<meta property="og:image" content="https://img.shields.io/github/forks/XIU2/CloudflareSpeedTest.svg?style=flat-square&label=Fork&color=f38020">
<meta property="article:published_time" content="2023-08-11T07:56:26.726Z">
<meta property="article:modified_time" content="2023-08-11T07:56:26.726Z">
<meta property="article:author" content="John Doe">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://img.shields.io/github/go-mod/go-version/XIU2/CloudflareSpeedTest.svg?style=flat-square&label=Go&color=00ADD8">
  
    <link rel="alternate" href="/atom.xml" title="Hexo" type="application/atom+xml">
  
  
    <link rel="shortcut icon" href="/favicon.png">
  
  
    
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/typeface-source-code-pro@0.0.71/index.min.css">

  
  
<link rel="stylesheet" href="/css/style.css">

  
    
<link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css">

  
  
<meta name="generator" content="Hexo 6.3.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Hexo</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"><span class="fa fa-bars"></span></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
        
          <a class="nav-icon" href="/atom.xml" title="RSS Feed"><span class="fa fa-rss"></span></a>
        
        <a class="nav-icon nav-search-btn" title="Search"><span class="fa fa-search"></span></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://example.com"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main"><article id="post-CF-SpeedTest - 测试 CF CDN 延迟和速度，CF自选IP" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2023/08/11/CF-SpeedTest%20-%20%E6%B5%8B%E8%AF%95%20CF%20CDN%20%E5%BB%B6%E8%BF%9F%E5%92%8C%E9%80%9F%E5%BA%A6%EF%BC%8CCF%E8%87%AA%E9%80%89IP/" class="article-date">
  <time class="dt-published" datetime="2023-08-11T07:56:26.726Z" itemprop="datePublished">2023-08-11</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="XIU2-CloudflareSpeedTest"><a href="#XIU2-CloudflareSpeedTest" class="headerlink" title="XIU2&#x2F;CloudflareSpeedTest"></a>XIU2&#x2F;CloudflareSpeedTest</h1><p><a target="_blank" rel="noopener" href="https://github.com/XIU2/CloudflareSpeedTest/blob/master/go.mod"><img src="https://img.shields.io/github/go-mod/go-version/XIU2/CloudflareSpeedTest.svg?style=flat-square&label=Go&color=00ADD8" alt="Go Version"></a><br><a target="_blank" rel="noopener" href="https://github.com/XIU2/CloudflareSpeedTest/releases/latest"><img src="https://img.shields.io/github/v/release/XIU2/CloudflareSpeedTest.svg?style=flat-square&label=Release&color=1784ff" alt="Release Version"></a><br><a target="_blank" rel="noopener" href="https://github.com/XIU2/CloudflareSpeedTest/blob/master/LICENSE"><img src="https://img.shields.io/github/license/XIU2/CloudflareSpeedTest.svg?style=flat-square&label=License&color=f38020" alt="GitHub license"></a><br><a target="_blank" rel="noopener" href="https://github.com/XIU2/CloudflareSpeedTest/stargazers"><img src="https://img.shields.io/github/stars/XIU2/CloudflareSpeedTest.svg?style=flat-square&label=Star&color=f38020" alt="GitHub Star"></a><br><a target="_blank" rel="noopener" href="https://github.com/XIU2/CloudflareSpeedTest/network/members"><img src="https://img.shields.io/github/forks/XIU2/CloudflareSpeedTest.svg?style=flat-square&label=Fork&color=f38020" alt="GitHub Fork"></a></p>
<p><a target="_blank" rel="noopener" href="https://github.com/XIU2/CloudflareSpeedTest/discussions/62">国外很多网站</a>都在使用 Cloudflare CDN，但分配给中国访客的 IP 并不友好（高延迟&#x2F;高丢包&#x2F;速度慢等）。<br>虽然 Cloudflare 公开了所有 <a target="_blank" rel="noopener" href="https://www.cloudflare.com/ips/">IP 段</a> ，但想要在这么多 IP 中找到适合自己的，怕是要累死，所以就有了这个软件。  </p>
<p>该软件可以<strong>测试 Cloudflare CDN 延迟和速度，获取最快 IP (IPv4+IPv6)<strong>！觉得好用请</strong>点个⭐鼓励一下下~</strong>  </p>
<blockquote>
<p><em>我另一个开源项目： <strong><a target="_blank" rel="noopener" href="https://github.com/XIU2/UserScript">一个 [油猴脚本] 轻松解决「Github」文件下载速度慢的问题！</a></strong></em>   </p>
</blockquote>
<hr>
<h2 id="快速使用"><a href="#快速使用" class="headerlink" title="快速使用"></a>快速使用</h2><h3 id="下载运行"><a href="#下载运行" class="headerlink" title="下载运行"></a>下载运行</h3><ol>
<li>下载编译好的可执行文件 <a target="_blank" rel="noopener" href="https://xiu.lanzoux.com/b0742hkxe">蓝奏云</a> &#x2F; <a target="_blank" rel="noopener" href="https://github.com/XIU2/CloudflareSpeedTest/releases">Github</a> 并解压。  </li>
<li>双击运行 <code>CloudflareST.exe</code>文件（Windows），等待测速完成…</li>
</ol>
<details>
<summary><code><strong>「 点击查看 Linux 下载运行命令示例 」</strong></code></summary>

<hr>
<p>以下命令仅为示例，版本号和文件名请前往 <a target="_blank" rel="noopener" href="https://github.com/XIU2/CloudflareSpeedTest/releases"><strong>Releases</strong></a> 查看。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 如果是第一次使用，则建议创建新文件夹（后续更新请跳过该步骤）</span></span><br><span class="line"><span class="built_in">mkdir</span> CloudflareST</span><br><span class="line"></span><br><span class="line"><span class="comment"># 进入文件夹（后续更新，只需要从这里重复下面的下载、解压命令即可）</span></span><br><span class="line"><span class="built_in">cd</span> CloudflareST</span><br><span class="line"></span><br><span class="line"><span class="comment"># 下载 CloudflareST 压缩包（自行根据需求替换 URL 中版本号和文件名）</span></span><br><span class="line">wget -N https://github.com/XIU2/CloudflareSpeedTest/releases/download/v1.4.7/CloudflareST_linux_amd64.tar.gz</span><br><span class="line"></span><br><span class="line"><span class="comment"># 解压（不需要删除旧文件，会直接覆盖，自行根据需求替换 文件名）</span></span><br><span class="line">tar -zxf CloudflareST_linux_amd64.tar.gz</span><br><span class="line"></span><br><span class="line"><span class="comment"># 赋予执行权限</span></span><br><span class="line"><span class="built_in">chmod</span> +x CloudflareST</span><br><span class="line"></span><br><span class="line"><span class="comment"># 运行</span></span><br><span class="line">./CloudflareST</span><br></pre></td></tr></table></figure>

<blockquote>
<p>如果平<strong>均延迟非常低</strong>（如 0.xx），则说明 CloudflareST <strong>测速时走了代理</strong>，请先关闭代理软件后再测速。<br>如果在<strong>路由器</strong>上运行（如 OpenWrt），请先关闭路由器内的代理，否则测速结果会<strong>不准确且无法使用</strong>。</p>
</blockquote>
</details>

<hr>
<blockquote>
<p><a target="_blank" rel="noopener" href="https://github.com/XIU2/CloudflareSpeedTest/discussions/61"><em><strong>在 Android 手机上运行 CloudflareST 测速的简单教程 …</strong></em></a><br><em><strong>建议测速时避开晚上高峰期（20:00~24:00）</strong>，否则测速结果会与其他时间<strong>相差很大…</strong></em>  </p>
</blockquote>
<h3 id="结果示例"><a href="#结果示例" class="headerlink" title="结果示例"></a>结果示例</h3><p>测速完毕后，默认会显示<strong>最快的 20 个 IP</strong>，示例（我联通白天测速结果）：  </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">IP 地址           已发送  已接收  丢包率  平均延迟  下载速度 (MB/s)</span><br><span class="line">104.27.200.69     4       4       0.00    146.23    28.64</span><br><span class="line">172.67.60.78      4       4       0.00    139.82    15.02</span><br><span class="line">104.25.140.153    4       4       0.00    146.49    14.90</span><br><span class="line">104.27.192.65     4       4       0.00    140.28    14.07</span><br><span class="line">172.67.62.214     4       4       0.00    139.29    12.71</span><br><span class="line">104.27.207.5      4       4       0.00    145.92    11.95</span><br><span class="line">172.67.54.193     4       4       0.00    146.71    11.55</span><br><span class="line">104.22.66.8       4       4       0.00    147.42    11.11</span><br><span class="line">104.27.197.63     4       4       0.00    131.29    10.26</span><br><span class="line">172.67.58.91      4       4       0.00    140.19    9.14</span><br><span class="line">...</span><br><span class="line"></span><br><span class="line"><span class="comment"># 如果平均延迟非常低（如 0.xx），则说明 CloudflareST 测速时走了代理，请先关闭代理软件后再测速。</span></span><br><span class="line"><span class="comment"># 如果在路由器上运行（如 OpenWrt），请先关闭路由器内的代理，否则测速结果会不准确且无法使用。</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 因为默认下载测速地址的文件大小只有 300MB，如果你速度太快的话，测速结果可能会低于实际速度。</span></span><br><span class="line"><span class="comment"># 因为每次测速都是在每个 IP 段中随机 IP，所以每次的测速结果都不可能相同，这是正常的！</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 软件是先 延迟测速并按从低到高排序后，再从 最低延迟的 IP 开始下载测速的，所以：</span></span><br></pre></td></tr></table></figure>

<p>测速结果第一行就是<strong>既下载速度最快、又平均延迟最低的最快 IP</strong>！至于拿来干嘛？取决于你~  </p>
<p>完整结果保存在当前目录下的 <code>result.csv</code> 文件中，用<strong>记事本&#x2F;表格软件</strong>打开，格式如下：  </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">IP 地址, 已发送, 已接收, 丢包率, 平均延迟, 下载速度 (MB/s)</span><br><span class="line">104.27.200.69, 4, 4, 0.00, 146.23, 28.64</span><br></pre></td></tr></table></figure>

<blockquote>
<p><em>大家可以按自己需求，对完整结果<strong>进一步筛选处理</strong>，或者去看一看进阶使用<strong>指定过滤条件</strong>！</em></p>
</blockquote>
<hr>
<h2 id="进阶使用"><a href="#进阶使用" class="headerlink" title="进阶使用"></a>进阶使用</h2><p>直接运行使用的是默认参数，如果想要测速结果更全面、更符合自己的要求，可以自定义参数。  </p>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">C:\&gt;<span class="title">CloudflareST.exe</span> -<span class="title">h</span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="title">CloudflareSpeedTest</span> <span class="title">vX.X.X</span></span></span><br><span class="line"><span class="function">测试 <span class="title">Cloudflare</span> <span class="title">CDN</span> 所有 <span class="title">IP</span> 的延迟和速度，获取最快 <span class="title">IP</span> (<span class="title">IPv4</span>+<span class="title">IPv6</span>)！</span></span><br><span class="line"><span class="function"><span class="title">https</span>://<span class="title">github.com</span>/<span class="title">XIU2</span>/<span class="title">CloudflareSpeedTest</span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function">参数：</span></span><br><span class="line"><span class="function">    -<span class="title">n</span> 500</span></span><br><span class="line"><span class="function">        测速线程数量；越多测速越快，性能弱的设备 (如路由器) 请适当调低；(默认 500 最多 1000 )</span></span><br><span class="line"><span class="function">    -<span class="title">t</span> 4</span></span><br><span class="line"><span class="function">        延迟测速次数；单个 <span class="title">IP</span> 延迟测速次数，为 1 时将过滤丢包的<span class="title">IP</span>，<span class="title">TCP</span>协议；(默认 4 )</span></span><br><span class="line"><span class="function">    -<span class="title">tp</span> 443</span></span><br><span class="line"><span class="function">        延迟测速端口；延迟测速 <span class="title">TCP</span> 协议的端口；(默认 443 )</span></span><br><span class="line"><span class="function">    -<span class="title">dn</span> 20</span></span><br><span class="line"><span class="function">        下载测速数量；延迟测速并排序后，从最低延迟起下载测速的数量；(默认 20 )</span></span><br><span class="line"><span class="function">    -<span class="title">dt</span> 10</span></span><br><span class="line"><span class="function">        下载测速时间；单个 <span class="title">IP</span> 下载测速最长时间，单位：秒；(默认 10 )</span></span><br><span class="line"><span class="function">    -<span class="title">url</span> <span class="title">https</span>://<span class="title">cf.xiu2.xyz</span>/<span class="title">Github</span>/<span class="title">CloudflareSpeedTest.png</span></span></span><br><span class="line"><span class="function">        下载测速地址；用来下载测速的 <span class="title">Cloudflare</span> <span class="title">CDN</span> 文件地址，如地址含有空格请加上引号；</span></span><br><span class="line"><span class="function">    -<span class="title">tl</span> 200</span></span><br><span class="line"><span class="function">        平均延迟上限；只输出低于指定平均延迟的 <span class="title">IP</span>，可单独使用也可搭配下载速度下限；(默认 9999.00 <span class="title">ms</span>)</span></span><br><span class="line"><span class="function">    -<span class="title">sl</span> 5</span></span><br><span class="line"><span class="function">        下载速度下限；只输出高于指定下载速度的 <span class="title">IP</span>，凑够指定数量 [-<span class="title">dn</span>] 才会停止测速；(默认 0.00 <span class="title">MB</span>/<span class="title">s</span> )</span></span><br><span class="line"><span class="function">    -<span class="title">p</span> 20</span></span><br><span class="line"><span class="function">        显示结果数量；测速后直接显示指定数量的结果，为 0 时不显示结果直接退出；(默认 20 )</span></span><br><span class="line"><span class="function">    -<span class="title">f</span> <span class="title">ip.txt</span></span></span><br><span class="line"><span class="function">        <span class="title">IP</span>段数据文件；如路径含有空格请加上引号；支持其他 <span class="title">CDN</span> <span class="title">IP</span>段；(默认 <span class="title">ip.txt</span> )</span></span><br><span class="line"><span class="function">    -<span class="title">o</span> <span class="title">result.csv</span></span></span><br><span class="line"><span class="function">        输出结果文件；如路径含有空格请加上引号；值为空格时不输出 [-<span class="title">o</span> &quot; &quot;]；(默认 <span class="title">result.csv</span> )</span></span><br><span class="line"><span class="function">    -<span class="title">dd</span></span></span><br><span class="line"><span class="function">        禁用下载测速；禁用后测速结果会按延迟排序 (默认按下载速度排序)；(默认 启用 )</span></span><br><span class="line"><span class="function">    -<span class="title">ipv6</span></span></span><br><span class="line"><span class="function">        <span class="title">IPv6</span>测速模式；确保 <span class="title">IP</span> 段数据文件内只包含 <span class="title">IPv6</span> <span class="title">IP</span>段，软件不支持同时测速 <span class="title">IPv4</span>+<span class="title">IPv6</span>；(默认 <span class="title">IPv4</span> )</span></span><br><span class="line"><span class="function">    -<span class="title">allip</span></span></span><br><span class="line"><span class="function">        测速全部的<span class="title">IP</span>；对 <span class="title">IP</span> 段中的每个 <span class="title">IP</span> (仅支持 <span class="title">IPv4</span>) 进行测速；(默认 每个 <span class="title">IP</span> 段随机测速一个 <span class="title">IP</span> )</span></span><br><span class="line"><span class="function">    -<span class="title">v</span></span></span><br><span class="line"><span class="function">        打印程序版本+检查版本更新</span></span><br><span class="line"><span class="function">    -<span class="title">h</span></span></span><br><span class="line"><span class="function">        打印帮助说明</span></span><br></pre></td></tr></table></figure>

<h3 id="使用示例"><a href="#使用示例" class="headerlink" title="使用示例"></a>使用示例</h3><p>Windows 要指定参数需要在 CMD 中运行，或者把参数添加到快捷方式目标中。  </p>
<blockquote>
<p><strong>注意</strong>：各参数均有<strong>默认值</strong>，使用默认值的参数是可以省略的（<strong>按需选择</strong>），参数<strong>不分前后顺序</strong>。<br><strong>提示</strong>：Linux 系统只需要把下面命令中的 <code>CloudflareST.exe</code> 改为 <code>./CloudflareST</code> 即可。  </p>
</blockquote>
<h4 id="IPv4-IPv6"><a href="#IPv4-IPv6" class="headerlink" title="# IPv4&#x2F;IPv6"></a># IPv4&#x2F;IPv6</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 指定 IPv4 数据文件（-f 默认值就是 ip.txt，所以该参数可以省略）</span></span><br><span class="line">CloudflareST.exe -f ip.txt</span><br><span class="line"></span><br><span class="line"><span class="comment"># 指定 IPv6 数据文件( ipv6.txt )，需要加上 -ipv6 参数</span></span><br><span class="line">CloudflareST.exe -f ipv6.txt -ipv6</span><br></pre></td></tr></table></figure>
<hr>
<h4 id="文件相对-绝对路径"><a href="#文件相对-绝对路径" class="headerlink" title="# 文件相对&#x2F;绝对路径"></a># 文件相对&#x2F;绝对路径</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 指定 IPv4 数据文件，不显示结果直接退出，输出结果到文件（-p 值为 0）</span></span><br><span class="line">CloudflareST.exe -f 1.txt -p 0 -<span class="built_in">dd</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 指定 IPv4 数据文件，不输出结果到文件，直接显示结果（-p 值为 10 条，-o 值为空格）</span></span><br><span class="line">CloudflareST.exe -f 2.txt -o <span class="string">&quot; &quot;</span> -p 10 -<span class="built_in">dd</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 指定 IPv4 数据文件 及 输出结果到文件（相对路径，即当前目录下，如含空格请加上引号）</span></span><br><span class="line">CloudflareST.exe -f 3.txt -o result.txt -<span class="built_in">dd</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 指定 IPv4 数据文件 及 输出结果到文件（绝对路径，即 C:\abc\ 目录下，如含空格请加上引号）</span></span><br><span class="line">CloudflareST.exe -f C:\abc\4.txt -o C:\abc\result.csv -<span class="built_in">dd</span></span><br></pre></td></tr></table></figure>
<hr>
<h4 id="自定义下载测速地址"><a href="#自定义下载测速地址" class="headerlink" title="# 自定义下载测速地址"></a># 自定义下载测速地址</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 地址要求：可以直接下载、文件大小超过 200MB、用的是 Cloudflare CDN</span></span><br><span class="line">CloudflareST.exe -url https://cf.xiu2.xyz/Github/CloudflareSpeedTest.png</span><br><span class="line"><span class="comment"># 因为默认下载测速地址的文件大小只有 300MB，如果你速度太快的话，测速结果可能会低于实际速度。</span></span><br></pre></td></tr></table></figure>
<hr>
<h4 id="自定义测速条件"><a href="#自定义测速条件" class="headerlink" title="# 自定义测速条件"></a># 自定义测速条件</h4><details>
<summary><code><strong>「 点击展开 查看内容 」</strong></code></summary>

<hr>
<ul>
<li>仅指定 <strong>[平均延迟上限]</strong> 条件</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 平均延迟上限：200 ms，下载速度下限：0 MB/s，数量：10 个（可选）</span></span><br><span class="line"><span class="comment"># 即找到平均延迟低于 200 ms 的 IP，然后再按延迟从低到高进行 10 次下载测速</span></span><br><span class="line">CloudflareST.exe -tl 200 -dn 10</span><br></pre></td></tr></table></figure>

<blockquote>
<p>如果没有一个 IP <strong>平均延迟低于 200ms</strong>，那么不会输出任何内容。  </p>
</blockquote>
<hr>
<ul>
<li>仅指定 <strong>[平均延迟上限]</strong> 条件，且<strong>只延迟测速，不下载测速</strong></li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 平均延迟上限：200 ms，下载速度下限：0 MB/s，数量：不知道多少 个</span></span><br><span class="line"><span class="comment"># 即只输出低于 200ms 的 IP，且不再下载测速（因为不再下载测速，所以 -dn 参数就无效了）</span></span><br><span class="line">CloudflareST.exe -tl 200 -<span class="built_in">dd</span></span><br></pre></td></tr></table></figure>

<hr>
<ul>
<li>仅指定 <strong>[下载速度下限]</strong> 条件</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 平均延迟上限：9999 ms，下载速度下限：5 MB/s，数量：10 个（可选）</span></span><br><span class="line"><span class="comment"># 即需要找到 10 个平均延迟低于 9999 ms 且下载速度高于 5 MB/s 的 IP 才会停止测速</span></span><br><span class="line">CloudflareST.exe -sl 5 -dn 10</span><br></pre></td></tr></table></figure>

<blockquote>
<p>没有指定平均延迟上限时，如果一直<strong>凑不够</strong>满足条件的 IP 数量，就会<strong>一直测速</strong>下去。<br>所以建议**同时指定 [下载速度下限] + [平均延迟上限]**，这样测速到指定延迟上限还没凑够数量，就会终止测速。</p>
</blockquote>
<hr>
<ul>
<li>同时指定 <strong>[平均延迟上限] + [下载速度下限]</strong> 条件</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 平均延迟上限、下载速度下限均支持小数（如 -sl 0.5）</span></span><br><span class="line"><span class="comment"># 平均延迟上限：200 ms，下载速度下限：5.6 MB/s，数量：10 个（可选）</span></span><br><span class="line"><span class="comment"># 即需要找到 10 个平均延迟低于 200 ms 且下载速度高于 5 .6MB/s 的 IP 才会停止测速</span></span><br><span class="line">CloudflareST.exe -tl 200 -sl 5.6 -dn 10</span><br></pre></td></tr></table></figure>

<blockquote>
<p>如果没有一个 IP <strong>平均延迟低于 200ms</strong>，那么不会输出任何内容。<br>如果没有一个 IP <strong>下载速度高于 5.6 MB&#x2F;s</strong>，那么就会<strong>和不指定 [下载速度下限] 条件一样</strong>输出结果。<br>所以建议先不指定条件测速一遍，看看平均延迟和下载速度大概在什么范围，避免指定条件<strong>过低&#x2F;过高</strong>！</p>
</blockquote>
<blockquote>
<p>因为Cloudflare 公开的 IP 段是<strong>回源 IP+任播 IP</strong>，而<strong>回源 IP</strong>是无法使用的，所以下载测速是 0.00。<br>运行时可以加上 <code>-sl 0.01</code>（下载速度下限），过滤掉<strong>回源 IP</strong>（下载测速低于 0.01MB&#x2F;s 的结果）。</p>
</blockquote>
</details>

<hr>
<h4 id="Windows-快捷方式如何使用参数"><a href="#Windows-快捷方式如何使用参数" class="headerlink" title="# Windows 快捷方式如何使用参数"></a># Windows 快捷方式如何使用参数</h4><details>
<summary><code><strong>「 点击展开 查看内容 」</strong></code></summary>

<hr>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## 右键快捷方式 - 目标</span></span><br><span class="line"><span class="comment"># 如果要不输出结果文件，那么请加上 -o &quot; &quot;，引号里的是空格（没有空格会导致该参数被省略）。</span></span><br><span class="line">D:\ABC\CloudflareST\CloudflareST.exe -n 500 -t 4 -dn 20 -dt 5 -o <span class="string">&quot; &quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 如果文件路径包含引号，则需要把启动参数放在引号外面，记得引号和 - 之间有空格。</span></span><br><span class="line"><span class="string">&quot;D:\Program Files\CloudflareST\CloudflareST.exe&quot;</span> -n 500 -t 4 -dn 20 -dt 5 -o <span class="string">&quot; &quot;</span></span><br></pre></td></tr></table></figure>

</details>

<hr>
<h4 id="单独对一个或多个-IP-测速"><a href="#单独对一个或多个-IP-测速" class="headerlink" title="# 单独对一个或多个 IP 测速"></a># 单独对一个或多个 IP 测速</h4><details>
<summary><code><strong>「 点击展开 查看内容 」</strong></code></summary>

<hr>
<p>如果要单独<strong>对一个或多个 IP 进行测速</strong>，只需要把这些 IP 按如下格式写入到任意文本文件中，例如：<code>1.txt</code></p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.1</span><span class="number">.1</span><span class="number">.1</span></span><br><span class="line"><span class="number">1.1</span><span class="number">.1</span><span class="number">.200</span></span><br><span class="line"><span class="number">1.0</span><span class="number">.0</span><span class="number">.1</span>/<span class="number">24</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>自从 v1.4.10 版本后，单个 IP 就不需要添加子网掩码 <code>/32</code> 了（<code>1.1.1.1</code>等同于 <code>1.1.1.1/32</code>）。<br>子网掩码 <code>/24</code> 指的是这个 IP 最后一段，即 <code>1.0.0.1~1.0.0.255</code>。</p>
</blockquote>
<p>然后运行 CloudflareST 时加上启动参数 <code>-f 1.txt</code> 即可。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 先进入 CloudflareST 所在目录，然后运行：</span></span><br><span class="line"><span class="comment"># Windows 系统（在 CMD 中运行）</span></span><br><span class="line">CloudflareST.exe -f 1.txt</span><br><span class="line"></span><br><span class="line"><span class="comment"># Linux 系统</span></span><br><span class="line">./CloudflareST -f 1.txt</span><br><span class="line"></span><br><span class="line"><span class="comment"># 对于 IP 段 1.0.0.1/24 软件只会随机最后一段（1.0.0.1~255），如果要测速该 IP 段中的所有 IP，需要加上 -allip 参数。</span></span><br></pre></td></tr></table></figure>

</details>

<hr>
<h4 id="一劳永逸加速所有使用-Cloudflare-CDN-的网站（不需要再一个个添加域名到-Hosts-了）"><a href="#一劳永逸加速所有使用-Cloudflare-CDN-的网站（不需要再一个个添加域名到-Hosts-了）" class="headerlink" title="# 一劳永逸加速所有使用 Cloudflare CDN 的网站（不需要再一个个添加域名到 Hosts 了）"></a># 一劳永逸加速所有使用 Cloudflare CDN 的网站（不需要再一个个添加域名到 Hosts 了）</h4><p>我以前说过，开发该软件项目的目的就是为了通过<strong>改 Hosts 的方式来加速访问使用 Cloudflare CDN 的网站</strong>。</p>
<p>但就如 <a target="_blank" rel="noopener" href="https://github.com/XIU2/CloudflareSpeedTest/issues/8"><strong>#8</strong></a> 所说，一个个添加域名到 Hosts 实在<strong>太麻烦</strong>了，于是我就找到了个<strong>一劳永逸</strong>的办法！</p>
<p>可以看这个 <a target="_blank" rel="noopener" href="https://github.com/XIU2/CloudflareSpeedTest/discussions/71"><strong>还在一个个添加 Hosts？完美本地加速所有使用 Cloudflare CDN 的网站方法来了！</strong></a> </p>
<hr>
<h4 id="自动更新-Hosts"><a href="#自动更新-Hosts" class="headerlink" title="# 自动更新 Hosts"></a># 自动更新 Hosts</h4><p>考虑到很多人获得最快 Cloudflare CDN IP 后，需要替换 Hosts 文件中的 IP。</p>
<p>可以看这个 <a target="_blank" rel="noopener" href="https://github.com/XIU2/CloudflareSpeedTest/issues/42"><strong>Issues</strong></a> 获取 <strong>Windows&#x2F;Linux 自动更新 Hosts 脚本</strong>！</p>
<hr>
<h4 id="自动更新域名解析记录"><a href="#自动更新域名解析记录" class="headerlink" title="# 自动更新域名解析记录"></a># 自动更新域名解析记录</h4><p>如果你的域名托管在 Cloudflare，则可以通过 Cloudflare 官方提供的 API 来自动更新域名解析记录。  </p>
<p>可以看这个 <a target="_blank" rel="noopener" href="https://github.com/XIU2/CloudflareSpeedTest/issues/40"><strong>Issues</strong></a> 获取<strong>手动教程</strong>或 <strong>Windows&#x2F;Linux 自动更新脚本</strong>！</p>
<hr>
<h2 id="问题反馈"><a href="#问题反馈" class="headerlink" title="问题反馈"></a>问题反馈</h2><p>如果你遇到什么问题，可以先去 <a target="_blank" rel="noopener" href="https://github.com/XIU2/CloudflareSpeedTest/issues"><strong>Issues</strong></a> 里看看是否有别人问过了（记得去看下  <a target="_blank" rel="noopener" href="https://github.com/XIU2/CloudflareSpeedTest/issues?q=is:issue+is:closed"><strong>Closed</strong></a> 的）。<br>如果没找到类似问题，请新开个 <a target="_blank" rel="noopener" href="https://github.com/XIU2/CloudflareSpeedTest/issues/new"><strong>Issues</strong></a> 来告诉我！</p>
<blockquote>
<p><em>有问题请<strong>大胆告诉我</strong>，描述越详细越好（必要时可远程协助），如果不说那我怎么去完善功能或<del>修复 BUG</del> 呢？！</em></p>
</blockquote>
<hr>
<h2 id="感谢项目"><a href="#感谢项目" class="headerlink" title="感谢项目"></a>感谢项目</h2><ul>
<li><a target="_blank" rel="noopener" href="https://github.com/Spedoske/CloudflareScanner">https://github.com/Spedoske/CloudflareScanner</a></li>
</ul>
<blockquote>
<p><em>因为该项目已经很长时间没更新了，而我又产生了很多功能需求，所以我临时学了下 Go 语言就上手了（菜）…</em><br><em>本软件基于该项目制作，但<strong>已添加大量功能及修复 BUG</strong>，并根据大家的使用反馈积极添加、优化功能（闲）…</em></p>
</blockquote>
<hr>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2023/08/11/CF-SpeedTest%20-%20%E6%B5%8B%E8%AF%95%20CF%20CDN%20%E5%BB%B6%E8%BF%9F%E5%92%8C%E9%80%9F%E5%BA%A6%EF%BC%8CCF%E8%87%AA%E9%80%89IP/" data-id="cll6artw90003gnro7em4dtva" data-title="" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2023/08/11/CentOS%208.2%E6%9B%B4%E6%8D%A2yum%E6%BA%90%E6%8A%A5%E9%94%99Errors%20during%20downloading%20metadata/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          (no title)
        
      </div>
    </a>
  
  
    <a href="/2023/08/11/Check%E9%85%B1%EF%BC%9A%E7%9B%91%E6%B5%8B%E7%BD%91%E9%A1%B5%E5%86%85%E5%AE%B9%E5%8F%98%E5%8C%96_new/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title"></div>
    </a>
  
</nav>

  
</article>


</section>
        
          <aside id="sidebar">
  
    

  
    

  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/08/">August 2023</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2023/08/11/%E3%80%90%E4%BA%AC%E4%B8%9C%E8%AE%A2%E5%8D%95%E8%87%AA%E5%8A%A8%E8%AF%84%E4%BB%B7%E8%84%9A%E6%9C%AC%E3%80%91%E6%89%B9%E9%87%8F%E4%B8%80%E9%94%AE%E8%87%AA%E5%8A%A8%E8%AF%84%E4%BB%B7%E8%BF%BD%E5%8A%A0%E5%9B%BE%E7%89%87/">(no title)</a>
          </li>
        
          <li>
            <a href="/2023/08/11/AdGuardHome%20%E5%AE%89%E8%A3%85%E5%8F%8A%E9%83%A8%E7%BD%B2%E6%95%99%E7%A8%8B_new/">(no title)</a>
          </li>
        
          <li>
            <a href="/2023/08/11/Aria2%20%E4%B8%80%E9%94%AE%E5%AE%89%E8%A3%85%E7%AE%A1%E7%90%86%E8%84%9A%E6%9C%AC%20%E5%A2%9E%E5%BC%BA%E7%89%88/">(no title)</a>
          </li>
        
          <li>
            <a href="/2023/08/11/BuyPass%20%E7%94%B3%E8%AF%B7%E5%85%8D%E8%B4%B9%E5%A4%9A%E5%9F%9F%E5%90%8D%20SSL%20%E8%AF%81%E4%B9%A6%E5%8F%8AZeroSSL%E8%AF%81%E4%B9%A6%E7%94%B3%E8%AF%B7_new/">(no title)</a>
          </li>
        
          <li>
            <a href="/2023/08/11/CentOS%207%E5%AE%89%E8%A3%85%E9%85%8D%E7%BD%AE%E7%BE%8E%E5%8C%96Transmission/">(no title)</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      
      &copy; 2023 John Doe<br>
      Powered by <a href="https://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    


<script src="/js/jquery-3.6.4.min.js"></script>



  
<script src="/fancybox/jquery.fancybox.min.js"></script>




<script src="/js/script.js"></script>





  </div>
</body>
</html>